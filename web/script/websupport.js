const socket=new WebSocket("wss://axonlab.glitch.me/"),statusElement=document.getElementById("status"),audio=document.getElementById("notificationSound");let unread_messages=0,afk=!1,loop_unread_messages=!1;function unreadMessageAlert(){!1===loop_unread_messages&&(loop_unread_messages=setInterval(()=>{document.title=`(+${unread_messages}) Suporte | AxonLab`,setTimeout(()=>{!1!==loop_unread_messages&&(document.title=unread_messages+" Mensagens não lidas!")},2e3)},4e3))}function message(Text,Tags){var Chatbox=document.getElementById("chatbox"),MessageBox=document.createElement("p");MessageBox.style.marginTop="0px",MessageBox.style.marginBottom="0px";for(const tag of Tags){var createTag=`<b style="color:${tag[1]} !important;">${tag[0]}</b> `;MessageBox.innerHTML=MessageBox.innerHTML+createTag}MessageBox.innerHTML=MessageBox.innerHTML+Text,Chatbox.appendChild(MessageBox),Chatbox.scrollTop=Chatbox.scrollHeight}function sendMessage(){""!==document.getElementById("message.content").value&&(socket.send(JSON.stringify({message:document.getElementById("message.content").value})),message(document.getElementById("message.content").value,[["VOCÊ","white"]]),document.getElementById("message.content").value="")}window.addEventListener("blur",()=>{afk=!0}),window.addEventListener("focus",()=>{loop_unread_messages&&(clearInterval(loop_unread_messages),loop_unread_messages=!1),unread_messages=0,afk=!1,document.title="Suporte | AxonLab"}),socket.onmessage=function(event){event=JSON.parse(event.data);event.status&&("false"===event.status?(statusElement.style="color:red !important;",statusElement.innerHTML="Suporte Offline"):(statusElement.style="color:yellow-green !important;",statusElement.innerHTML="Suporte Online")),event.heartbeat&&socket.send(JSON.stringify({heartbeat:event.heartbeat})),event.message&&(event.notification?(audio.play(),afk&&(unread_messages++,document.title=`(+${unread_messages}) Suporte | AxonLab`,unreadMessageAlert())):afk&&(unreadMessageAlert(),unread_messages++,audio.play(),document.title=`(+${unread_messages}) Suporte | AxonLab`),message(event.message,event.tags))},socket.onopen=()=>{document.getElementById("message.send").addEventListener("click",()=>{sendMessage()}),document.getElementById("message.content").addEventListener("keypress",event=>{"Enter"===event.key&&(event.preventDefault(),sendMessage())})};